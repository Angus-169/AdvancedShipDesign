import cvxpy as cp
import numpy as np
CostL1 = np.array([ 0.5073 , 0.5690 , 0.4790 , 0.4853 , 0.6983 , 0.6653 , 0.4542 ])
CostL2 = np.array([ 0.2858 , 0.3102 , 0.2683 , 0.2712 , 0.3667 , 0.3307 , 0.2550 ])
CostL3 = np.array([ 0.5908 , 0.6680 , 0.5598 , 0.5677 , 0.8268 , 0.7832 , 0.5340 ])
CostL4 = np.array([ 0.6982 , 0.7902 , 0.6620 , 0.6715 , 0.9648 , 0.9227 , 0.6290 ])
TotalCost = np.array([ CostL1 , CostL2 , CostL3 , CostL4 ])

EachFerryTime = np.array(
    [ 55, 0, 0, 0, 0, 0, 0, 30, 0, 0, 0, 0, 0, 0, 70, 0, 0, 0, 0, 0, 0, 80, 0, 0, 0, 0, 0, 0 ],
    [ 0, 55, 0, 0, 0, 0, 0, 0, 30, 0, 0, 0, 0, 0, 0, 70, 0, 0, 0, 0, 0, 0, 80, 0, 0, 0, 0, 0 ],
    [ 0, 0, 55, 0, 0, 0, 0, 0, 0, 30, 0, 0, 0, 0, 0, 0, 70, 0, 0, 0, 0, 0, 0, 80, 0, 0, 0, 0 ],
    [ 0, 0, 0, 55, 0, 0, 0, 0, 0, 0, 30, 0, 0, 0, 0, 0, 0, 70, 0, 0, 0, 0, 0, 0, 80, 0, 0, 0 ],
    [ 0, 0, 0, 0, 55, 0, 0, 0, 0, 0, 0, 30, 0, 0, 0, 0, 0, 0, 70, 0, 0, 0, 0, 0, 0, 80, 0, 0 ],
    [ 0, 0, 0, 0, 0, 55, 0, 0, 0, 0, 0, 0, 30, 0, 0, 0, 0, 0, 0, 70, 0, 0, 0, 0, 0, 0, 80, 0 ],
    [ 0, 0, 0, 0, 0, 0, 55, 0, 0, 0, 0, 0, 0, 30, 0, 0, 0, 0, 0, 0, 70, 0, 0, 0, 0, 0, 0, 80 ])
EachFerryTimeLim = np.array([ 840 , 840 , 840 , 840 , 840 , 840 , 840 ])

EachLineNum = np.array(
    [ 1, 1, 1, 1, 1, 1, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0 ],
    [ 0, 0, 0, 0, 0, 0, 0, 1, 1, 1, 1, 1, 1, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0 ],
    [ 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 1, 1, 1, 1, 1, 1, 0, 0, 0, 0, 0, 0, 0 ],
    [ 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 1, 1, 1, 1, 1, 1 ])
EachLineNumLim = np.array([ 14 , 26 , 24 , 6 ])

lb = np.zeros((28,), dtype = int)

x = cp.Variable(28, integer = True)
obj = cp.Minimize(TotalCost * x)
cons = [EachFerryTime * x <= EachFerryTimeLim, EachLineNum * x <= EachLineNumLim, EachLineNum * x >= EachLineNumLim]
prob = cp.Problem(obj, cons)
prob.solve(solver = 'GLPK_MI', verbose = True)
print("最少运营成本为：", prob.Value)
print("最佳配船为：\n", x.value)